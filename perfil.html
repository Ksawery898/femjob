<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FemJob | Perfil</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header class="topbar">
  <div class="nav">
    <a class="brand" href="index.html">
      <img src="femjob_logo_h36.png" alt="FemJob" class="logo-img">
      <span>FemJob</span>
    </a>

    <nav class="navlinks">
      <a href="index.html">Inicio</a>
      <a href="recomendaciones.html">Recomendaciones</a>
      <a class="active" href="perfil.html">Mi Perfil</a>
      <a href="capacitacion.html">Capacitación</a>
      <a href="empresa.html">Empresas</a>
      <a href="sobre.html">Sobre</a>
      <a href="contacto.html">Contacto</a>
      <a href="faq.html">FAQ</a>
      <a href="terminos.html">Términos</a>
    </nav>
  </div>
</header>

<main class="container">

  <section class="card">
    <span class="badge">Onboarding (MVP)</span>
    <h1>Crear perfil</h1>
    <p>Primero completa tu perfil y elige si usarás FemJob como <b>Persona</b> o <b>Empresa</b>.</p>
  </section>

  <div class="grid">

    <aside class="card">
      <h2>Acciones</h2>
      <p class="meta">Se guardará localmente en tu navegador.</p>

      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn primary" type="button" onclick="saveProfile()">Guardar</button>
        <button class="btn" type="button" onclick="clearProfile()">Borrar</button>
        <button class="btn secondary" type="button" onclick="goNext()">Ir a mi sección</button>
      </div>

      <hr>
      <div id="statusChip" class="care-chip" style="display:none;"></div>
      <p class="hint" style="margin-top:10px;">*Este MVP usa roles para mostrar solo lo relevante a cada usuario.</p>
    </aside>

    <section class="card">
      <h2>Datos básicos</h2>

      <div class="split">
        <div class="field">
          <label for="nombre">Nombre</label>
          <input id="nombre" placeholder="Ej: Daniela Pérez" />
        </div>
        <div class="field">
          <label for="correo">Correo</label>
          <input id="correo" placeholder="Ej: daniela@mail.com" />
        </div>
      </div>

      <div class="split">
        <div class="field">
          <label for="ciudad">Ciudad</label>
          <input id="ciudad" placeholder="Ej: Santiago" />
        </div>
        <div class="field">
          <label for="rol">Tipo de cuenta</label>
          <select id="rol" onchange="renderRoleSections()">
            <option value="persona">Persona (busca empleo)</option>
            <option value="empresa">Empresa (publica vacantes)</option>
          </select>
        </div>
      </div>

      <hr>

      <!-- PERSONA -->
      <div id="personaBox">
        <h2>Preferencias (Persona)</h2>
        <div class="split">
          <div class="field">
            <label for="area">Área</label>
            <select id="area">
              <option>Marketing</option>
              <option>TI / Datos</option>
              <option>RR.HH.</option>
              <option>Administración</option>
              <option>Servicios</option>
            </select>
          </div>
          <div class="field">
            <label for="modalidad">Modalidad preferida</label>
            <select id="modalidad">
              <option>Remoto</option>
              <option>Híbrido</option>
              <option>Presencial</option>
            </select>
          </div>
        </div>

        <div class="split">
          <div class="field">
            <label for="experiencia">Experiencia</label>
            <select id="experiencia">
              <option>Junior</option>
              <option>Semi-senior</option>
              <option>Senior</option>
            </select>
          </div>
          <div class="field">
            <label style="display:flex; gap:10px; align-items:center; margin-top:22px;">
              <input id="careMode" type="checkbox" />
              Modo Mamá / Cuidadora (prioriza flexibilidad)
            </label>
          </div>
        </div>

        <h2>Habilidades (opcional)</h2>
        <div class="skill-grid">
          <label class="chk"><input type="checkbox" value="excel"> Excel</label>
          <label class="chk"><input type="checkbox" value="crm"> CRM</label>
          <label class="chk"><input type="checkbox" value="marketing"> Marketing</label>
          <label class="chk"><input type="checkbox" value="rrhh"> RR.HH.</label>
          <label class="chk"><input type="checkbox" value="data"> Datos</label>
          <label class="chk"><input type="checkbox" value="python"> Python</label>
          <label class="chk"><input type="checkbox" value="sql"> SQL</label>
          <label class="chk"><input type="checkbox" value="comunicacion"> Comunicación</label>
        </div>
      </div>

      <!-- EMPRESA -->
      <div id="empresaBox" style="display:none;">
        <h2>Datos (Empresa)</h2>
        <div class="split">
          <div class="field">
            <label for="empresaNombre">Nombre empresa</label>
            <input id="empresaNombre" placeholder="Ej: Empresa Naranja SpA" />
          </div>
          <div class="field">
            <label for="empresaRubro">Rubro</label>
            <select id="empresaRubro">
              <option>Servicios</option>
              <option>Tecnología</option>
              <option>Retail</option>
              <option>Salud</option>
              <option>Educación</option>
              <option>Otro</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label for="empresaDesc">Descripción breve</label>
          <input id="empresaDesc" placeholder="Ej: Empresa enfocada en innovación y empleabilidad." />
        </div>

        <div class="card" style="background:#f8fafc; border-style:dashed;">
          <h3 style="margin:0 0 6px;">Funciones disponibles (demo)</h3>
          <p style="margin:0;">Luego podrás publicar vacantes y revisar postulaciones desde la sección Empresa.</p>
        </div>
      </div>

    </section>
  </div>

  <div class="footer">FemJob • Perfil (roles)</div>
</main>

<script>
  const KEY = "femjob_user_v1";

  function getSkills(){
    return Array.from(document.querySelectorAll('.skill-grid input[type="checkbox"]:checked'))
      .map(x => x.value);
  }
  function setSkills(arr){
    const set = new Set(arr || []);
    document.querySelectorAll('.skill-grid input[type="checkbox"]').forEach(cb => cb.checked = set.has(cb.value));
  }

  function renderRoleSections(){
    const rol = document.getElementById("rol").value;
    document.getElementById("personaBox").style.display = rol === "persona" ? "block" : "none";
    document.getElementById("empresaBox").style.display = rol === "empresa" ? "block" : "none";
  }

  function loadProfile(){
    const raw = localStorage.getItem(KEY);
    if(!raw){
      renderRoleSections();
      return;
    }
    const d = JSON.parse(raw);

    document.getElementById("nombre").value = d.nombre || "";
    document.getElementById("correo").value = d.correo || "";
    document.getElementById("ciudad").value = d.ciudad || "Santiago";
    document.getElementById("rol").value = d.rol || "persona";

    // persona
    document.getElementById("area").value = d.area || "Marketing";
    document.getElementById("modalidad").value = d.modalidad || "Remoto";
    document.getElementById("experiencia").value = d.experiencia || "Junior";
    document.getElementById("careMode").checked = !!d.careMode;
    setSkills(d.skills || []);

    // empresa
    document.getElementById("empresaNombre").value = d.empresaNombre || "";
    document.getElementById("empresaRubro").value = d.empresaRubro || "Servicios";
    document.getElementById("empresaDesc").value = d.empresaDesc || "";

    renderRoleSections();

    const chip = document.getElementById("statusChip");
    chip.style.display = "inline-flex";
    chip.textContent = `Perfil guardado: ${d.rol === "persona" ? "Persona" : "Empresa"}`;
  }

  function saveProfile(){
    const nombre = document.getElementById("nombre").value.trim();
    const correo = document.getElementById("correo").value.trim();
    const ciudad = document.getElementById("ciudad").value.trim();
    const rol = document.getElementById("rol").value;

    if(!nombre || !correo || !ciudad){
      alert("Completa Nombre, Correo y Ciudad.");
      return;
    }

    const data = {
      nombre, correo, ciudad, rol,
      // persona
      area: document.getElementById("area").value,
      modalidad: document.getElementById("modalidad").value,
      experiencia: document.getElementById("experiencia").value,
      careMode: document.getElementById("careMode").checked,
      skills: getSkills(),
      // empresa
      empresaNombre: document.getElementById("empresaNombre").value.trim(),
      empresaRubro: document.getElementById("empresaRubro").value,
      empresaDesc: document.getElementById("empresaDesc").value.trim(),
    };

    localStorage.setItem(KEY, JSON.stringify(data));

    const chip = document.getElementById("statusChip");
    chip.style.display = "inline-flex";
    chip.textContent = `Perfil guardado: ${rol === "persona" ? "Persona" : "Empresa"}`;

    alert("Perfil guardado (demo).");
  }

  function clearProfile(){
    localStorage.removeItem(KEY);
    location.reload();
  }

  function goNext(){
    const raw = localStorage.getItem(KEY);
    if(!raw){
      alert("Primero debes guardar tu perfil.");
      return;
    }
    const d = JSON.parse(raw);
    if(d.rol === "empresa"){
      location.href = "empresa.html";
    }else{
      location.href = "recomendaciones.html";
    }
  }

  window.addEventListener("load", loadProfile);
</script>

</body>
</html>

