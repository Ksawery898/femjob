<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FemJob | Mi Perfil</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header class="topbar">
  <div class="nav">
    <a class="brand" href="index.html">
      <div class="logo"></div>
      <span>FemJob</span>
    </a>

    <nav class="navlinks">
      <a href="index.html">Inicio</a>
      <a href="recomendaciones.html">Recomendaciones</a>
      <a class="active" href="perfil.html">Mi Perfil</a>
      <a href="capacitacion.html">Capacitación</a>
      <a href="empresa.html">Empresas</a>
      <a href="sobre.html">Sobre</a>
      <a href="contacto.html">Contacto</a>
      <a href="faq.html">FAQ</a>
      <a href="terminos.html">Términos</a>
    </nav>
  </div>
</header>

<main class="container">

  <section class="card">
    <span class="badge">Funcionalidad útil (MVP)</span>
    <h1>Crear / Editar Perfil</h1>
    <p>
      Completa tu perfil para que FemJob te recomiende vacantes según tus intereses, habilidades y preferencias.
      Los datos se guardan en tu navegador (localStorage).
    </p>
  </section>

  <div class="grid">

    <aside class="card">
      <h2>Acciones</h2>
      <p class="meta">Guarda tu perfil para ver recomendaciones personalizadas.</p>

      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn primary" type="button" onclick="saveProfile()">Guardar perfil</button>
        <button class="btn" type="button" onclick="resetProfile()">Restablecer</button>
        <button class="btn secondary" type="button" onclick="goRecommendations()">Ver recomendaciones</button>
      </div>

      <hr>

      <div id="savedMsg" class="care-chip" style="display:none;">Perfil guardado</div>
      <p class="hint" style="margin-top:10px;">
        *MVP: el perfil se utiliza para puntuar y ordenar vacantes por compatibilidad.
      </p>
    </aside>

    <section class="card">
      <h2>Datos personales</h2>

      <div class="split">
        <div class="field">
          <label for="nombre">Nombre</label>
          <input id="nombre" placeholder="Ej: Daniela Pérez" />
        </div>
        <div class="field">
          <label for="correo">Correo</label>
          <input id="correo" placeholder="Ej: daniela@mail.com" />
        </div>
      </div>

      <hr>

      <h2>Preferencias laborales</h2>

      <div class="split">
        <div class="field">
          <label for="area">Área principal</label>
          <select id="area">
            <option>Marketing</option>
            <option>TI / Datos</option>
            <option>RR.HH.</option>
            <option>Administración</option>
            <option>Servicios</option>
          </select>
        </div>
        <div class="field">
          <label for="modalidad">Modalidad preferida</label>
          <select id="modalidad">
            <option>Remoto</option>
            <option>Híbrido</option>
            <option>Presencial</option>
          </select>
        </div>
      </div>

      <div class="split">
        <div class="field">
          <label for="experiencia">Experiencia</label>
          <select id="experiencia">
            <option>Junior</option>
            <option>Semi-senior</option>
            <option>Senior</option>
          </select>
        </div>
        <div class="field">
          <label for="ciudad">Ciudad</label>
          <input id="ciudad" placeholder="Ej: Santiago" />
        </div>
      </div>

      <hr>

      <h2>Habilidades (para adaptar vacantes)</h2>
      <p class="meta">Selecciona tus habilidades principales. Esto impacta directamente las recomendaciones.</p>

      <div class="skill-grid">
        <label class="chk"><input type="checkbox" value="excel"> Excel</label>
        <label class="chk"><input type="checkbox" value="crm"> CRM</label>
        <label class="chk"><input type="checkbox" value="marketing"> Marketing Digital</label>
        <label class="chk"><input type="checkbox" value="rrhh"> RR.HH.</label>
        <label class="chk"><input type="checkbox" value="data"> Análisis de Datos</label>
        <label class="chk"><input type="checkbox" value="python"> Python</label>
        <label class="chk"><input type="checkbox" value="sql"> SQL</label>
        <label class="chk"><input type="checkbox" value="atencion"> Atención al Cliente</label>
        <label class="chk"><input type="checkbox" value="gestion"> Gestión / Administración</label>
        <label class="chk"><input type="checkbox" value="comunicacion"> Comunicación</label>
      </div>

      <hr>

      <h2>Modo Mamá / Cuidadora (opcional)</h2>
      <div class="card" style="background:#f8fafc; border-style:dashed;">
        <div style="display:flex; gap:12px; align-items:flex-start;">
          <input id="careMode" type="checkbox" style="margin-top:4px;" />
          <div>
            <h3 style="margin:0 0 6px;">Priorizar empleos compatibles con cuidados</h3>
            <p style="margin:0;">
              Aumenta la prioridad de vacantes <b>remotas/híbridas</b> y con <b>flexibilidad</b>.
            </p>
          </div>
        </div>
      </div>

    </section>
  </div>

  <div class="footer">FemJob • Perfil (MVP)</div>
</main>

<script>
  const KEY_PROFILE = "femjob_profile_mvp_v1";

  function getSkills(){
    return Array.from(document.querySelectorAll('.skill-grid input[type="checkbox"]:checked'))
      .map(x => x.value);
  }

  function setSkills(arr){
    const set = new Set(arr || []);
    document.querySelectorAll('.skill-grid input[type="checkbox"]').forEach(cb => {
      cb.checked = set.has(cb.value);
    });
  }

  function loadProfile(){
    const raw = localStorage.getItem(KEY_PROFILE);
    const data = raw ? JSON.parse(raw) : {};

    document.getElementById("nombre").value = data.nombre || "";
    document.getElementById("correo").value = data.correo || "";
    document.getElementById("area").value = data.area || "Marketing";
    document.getElementById("modalidad").value = data.modalidad || "Remoto";
    document.getElementById("experiencia").value = data.experiencia || "Junior";
    document.getElementById("ciudad").value = data.ciudad || "Santiago";

    setSkills(data.skills || []);
    document.getElementById("careMode").checked = !!data.careMode;
  }

  function saveProfile(){
    const data = {
      nombre: document.getElementById("nombre").value.trim(),
      correo: document.getElementById("correo").value.trim(),
      area: document.getElementById("area").value,
      modalidad: document.getElementById("modalidad").value,
      experiencia: document.getElementById("experiencia").value,
      ciudad: document.getElementById("ciudad").value.trim() || "Santiago",
      skills: getSkills(),
      careMode: document.getElementById("careMode").checked
    };
    localStorage.setItem(KEY_PROFILE, JSON.stringify(data));

    const msg = document.getElementById("savedMsg");
    msg.style.display = "inline-flex";
    msg.textContent = "Perfil guardado";
    setTimeout(() => msg.style.display = "none", 1800);
  }

  function resetProfile(){
    localStorage.removeItem(KEY_PROFILE);
    loadProfile();
    alert("Perfil restablecido (demo).");
  }

  function goRecommendations(){
    saveProfile();
    location.href = "recomendaciones.html";
  }

  window.addEventListener("load", loadProfile);
</script>

</body>
</html>
